import{_ as f,o as m,c as p,a as e,r as x,w as $,v as B,F as T,p as k,b as A,d as X,e as U,t as C,f as R,g as N,u as H,n as E,h as O,i as D,j as g,k as w,l as M,m as P,q as V,s as F,T as z,x as J,y as b}from"./index-DRwppH7f.js";const j={data(){return{showMovements:!1}}},q=t=>(k("data-v-f6d6088d"),t=t(),A(),t),W={class:"header"},Z={class:"resume"},K={class:"movements"},Q=q(()=>e("div",{class:"grip"},null,-1)),Y=[Q],ee={class:"body"};function te(t,s,a,c,o,n){return m(),p(T,null,[e("div",W,[x(t.$slots,"header",{},void 0)]),e("div",Z,[x(t.$slots,"resume",{},void 0)]),e("div",K,[e("div",{class:"head",onClick:s[0]||(s[0]=r=>o.showMovements=!o.showMovements)},Y),$(e("div",ee,[x(t.$slots,"movements",{},void 0)],512),[[B,o.showMovements]])])],64)}const oe=f(j,[["render",te],["__scopeId","data-v-f6d6088d"]]),se={methods:{reload(){window.location.reload()}}},ne=e("h1",null,[U("Cash"),e("span",null,"Flow")],-1),ae=e("span",null,null,-1);function le(t,s,a,c,o,n){return m(),p("header",null,[e("img",{onClick:s[0]||(s[0]=(...r)=>n.reload&&n.reload(...r)),src:X,alt:"logo"}),ne,ae])}const ie=f(se,[["render",le]]),ce=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}),re={props:{totalLabel:{type:String},label:{type:String,default:null},totalAmount:{type:Number},amount:{type:Number,default:null}},computed:{labelVisual(){return this.label!==null?this.label:this.totalLabel},amountVisual(){return this.amount!==null?this.amount:this.totalAmount},amountCurrency(){return ce.format(this.amountVisual)}}},ue={class:"graphic"},me={class:"action"};function de(t,s,a,c,o,n){return m(),p("main",null,[e("p",null,C(n.labelVisual),1),e("h1",null,C(n.amountCurrency),1),e("div",ue,[x(t.$slots,"graphic",{},void 0)]),e("div",me,[x(t.$slots,"action",{},void 0)])])}const ve=f(re,[["render",de],["__scopeId","data-v-0f38ab68"]]),_e="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.5%207.37193L5.625%2022.5H18.375L19.5%207.37193M4.5%207.37193H3L4.125%203.48113H6.75M4.5%207.37193H19.5M19.5%207.37193H21L20.25%203.48113H17.25M17.25%203.48113H12.375H6.75M17.25%203.48113L15.75%201.5H8.25L6.75%203.48113M9%2010.217V19.3302M15%2019.3302V10.217M12%2019.3302V10.217'%20stroke='%230689B0'%20stroke-width='2'/%3e%3c/svg%3e",pe={class:"movement"},he={class:"content"},fe={class:"action"},$e={__name:"Movement",props:{id:{type:Number},title:{type:String},description:{type:String},amount:{type:Number}},emits:["remove"],setup(t,{emit:s}){const a=new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}),c=t,{id:o,title:n,description:r,amount:v}=R(c),u=N(()=>a.format(v.value)),_=N(()=>v.value<0),h=s,l=()=>{h("remove",o.value)};return(i,d)=>(m(),p("div",pe,[e("div",he,[e("h4",null,C(H(n)),1),e("p",null,C(H(r)),1)]),e("div",fe,[e("img",{src:_e,alt:"borrar",onClick:l}),e("p",{class:E({red:_.value,green:!_.value})},C(u.value),3)])]))}},ge=f($e,[["__scopeId","data-v-46817aca"]]),ye=t=>(k("data-v-2411fd05"),t=t(),A(),t),be={class:"movements"},we=ye(()=>e("h2",{class:"title"},"Historial",-1)),Me={class:"content"},xe={__name:"index",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(t,{emit:s}){const a=t,{movements:c}=R(a),o=s,n=r=>{o("remove",r)};return(r,v)=>(m(),p("div",be,[we,e("div",Me,[(m(!0),p(T,null,O(H(c),({id:u,title:_,description:h,amount:l})=>(m(),D(ge,{key:u,id:u,title:_,description:h,amount:l,onRemove:n},null,8,["id","title","description","amount"]))),128))])]))}},Ie=f(xe,[["__scopeId","data-v-2411fd05"]]),Le="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.12132%200L0%202.12132L9.54595%2011.6673L0%2021.2132L2.12132%2023.3345L11.6673%2013.7886L21.2132%2023.3345L23.3345%2021.2132L13.7886%2011.6673L23.3345%202.12133L21.2132%208.22544e-06L11.6673%209.54595L2.12132%200Z'%20fill='%230689B0'/%3e%3c/svg%3e",Se=t=>(k("data-v-a0ea70b6"),t=t(),A(),t),Ce={class:"modal"},ke=Se(()=>e("p",null,"Nuevo movimiento",-1)),Ae={class:"body"},Ne={__name:"Modal",emits:["close"],setup(t,{emit:s}){const a=s,c=()=>a("close");return(o,n)=>(m(),p("div",Ce,[e("div",{class:"head"},[ke,e("img",{onClick:c,src:Le,alt:"cerrar"})]),e("div",Ae,[x(o.$slots,"default",{},void 0)])]))}},Ve=f(Ne,[["__scopeId","data-v-a0ea70b6"]]),y=t=>(k("data-v-a3945c57"),t=t(),A(),t),He={class:"field"},Be=y(()=>e("label",null,"Titulo",-1)),Te={class:"field"},Re=y(()=>e("label",null,"Monto",-1)),De={class:"field"},Fe=y(()=>e("label",null,"Descripcion",-1)),Ge={class:"field"},Xe=y(()=>e("label",null,"Tipo de movimiento",-1)),Ue={class:"radio-label"},Ee=y(()=>e("span",null,"Ingreso",-1)),Oe={class:"radio-label"},Pe=y(()=>e("span",null,"Gasto",-1)),ze=y(()=>e("div",{class:"action"},[e("button",null," Agregar movimiento ")],-1)),Je={__name:"Action",emits:["create"],setup(t,{emit:s}){const a=g(!1),c=g(""),o=g(0),n=g(""),r=g("Ingreso"),v=s;function u(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)+1}const _=()=>{a.value=!a.value,v("create",{title:c.value,desciption:n.value,amount:r.value==="Ingreso"?o.value:-o.value,time:new Date,id:u()}),c.value="",n.value="",o.value=0,r.value="Ingreso"};return(h,l)=>(m(),p(T,null,[e("button",{onClick:l[0]||(l[0]=i=>a.value=!0)},"Agregar movimiento"),(m(),D(z,{to:"#app"},[$(w(Ve,{onClose:l[6]||(l[6]=i=>a.value=!1)},{default:M(()=>[e("form",{onSubmit:P(_,["prevent"])},[e("div",He,[Be,$(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=i=>c.value=i)},null,512),[[V,c.value]])]),e("div",Te,[Re,$(e("input",{type:"number","onUpdate:modelValue":l[2]||(l[2]=i=>o.value=i)},null,512),[[V,o.value]])]),e("div",De,[Fe,$(e("textarea",{rows:"4","onUpdate:modelValue":l[3]||(l[3]=i=>n.value=i)},null,512),[[V,n.value]])]),e("div",Ge,[Xe,e("label",Ue,[$(e("input",{type:"radio","onUpdate:modelValue":l[4]||(l[4]=i=>r.value=i),value:"Ingreso"},null,512),[[F,r.value]]),Ee]),e("label",Oe,[$(e("input",{type:"radio","onUpdate:modelValue":l[5]||(l[5]=i=>r.value=i),value:"Gasto"},null,512),[[F,r.value]]),Pe])]),ze],32)]),_:1},512),[[B,a.value]])]))],64))}},je=f(Je,[["__scopeId","data-v-a3945c57"]]),qe=t=>(k("data-v-e5ad8596"),t=t(),A(),t),We=["y1","y2"],Ze=["points"],Ke=["x1","x2"],Qe=qe(()=>e("p",null,"Últimos 30 días",-1)),Ye={__name:"Graphic",props:{amounts:{type:Array,default:()=>[]}},emits:["select"],setup(t,{emit:s}){const a=t,c=i=>{const d=Math.min(...o.value),I=Math.max(...o.value),L=i+Math.abs(d),S=Math.abs(I)+Math.abs(d);return 200-L*100/S*2},{amounts:o}=R(a),n=N(()=>c(0)),r=N(()=>{const i=o.value.length;return o.value.reduce((d,I,L)=>{const S=300/i*(L+1),G=c(I);return`${d} ${S}, ${G}`},`0, ${c(o.value.length?o.value[0]:0)}`)}),v=g(!1),u=g(0),_=s;J(u,i=>{const d=Math.ceil(i/(300/o.value.length));d<0||d>o.value.length||_("select",o.value[d-1])});const h=({target:i,touches:d})=>{v.value=!0;const I=i.getBoundingClientRect().width,L=i.getBoundingClientRect().x,S=d[0].clientX;u.value=(S-L)*300/I},l=()=>{v.value=!1};return(i,d)=>(m(),p("div",null,[(m(),p("svg",{onTouchstart:h,onTouchmove:h,onTouchend:l,viewBox:"0 0 300 200"},[e("line",{stroke:"#c4c4c4","stroke-width":"2",x1:"0",y1:n.value,x2:"300",y2:n.value},null,8,We),e("polyline",{fill:"none",stroke:"#0689B0","stroke-width":"2",points:r.value},null,8,Ze),$(e("line",{stroke:"#04b500","stroke-width":"2",x1:u.value,y1:"0",x2:u.value,y2:"200"},null,8,Ke),[[B,v.value]])],32)),Qe]))}},et=f(Ye,[["__scopeId","data-v-e5ad8596"]]),tt={components:{Layout:oe,Header:ie,Resume:ve,Movements:Ie,Action:je,Graphic:et},data(){return{label:null,amount:null,movements:[]}},computed:{amounts(){const t=this.movements.filter(s=>{const a=new Date,c=a.setDate(a.getDate()-30);return s.time>c}).map(s=>s.amount);return t.map((s,a)=>t.slice(0,a+1).reduce((o,n)=>o+n,0))},totalAmount(){return this.movements.reduce((t,s)=>t+s.amount,0)}},mounted(){const t=JSON.parse(localStorage.getItem("movements"));Array.isArray(t)&&(this.movements=t.map(s=>({...s,time:new Date(s.time)})))},methods:{create(t){this.movements.push(t),this.save()},remove(t){const s=this.movements.findIndex(a=>a.id===t);this.movements.splice(s,1),this.save()},save(){localStorage.setItem("movements",JSON.stringify(this.movements))},select(t){this.amount=t}}};function ot(t,s,a,c,o,n){const r=b("Header"),v=b("Graphic"),u=b("Action"),_=b("Resume"),h=b("Movements"),l=b("Layout");return m(),D(l,null,{header:M(()=>[w(r)]),resume:M(()=>[w(_,{"total-label":"Ahorro total",label:o.label,"total-amount":n.totalAmount,amount:o.amount},{graphic:M(()=>[w(v,{amounts:n.amounts,onSelect:n.select},null,8,["amounts","onSelect"])]),action:M(()=>[w(u,{onCreate:n.create},null,8,["onCreate"])]),_:1},8,["label","total-amount","amount"])]),movements:M(()=>[w(h,{movements:o.movements,onRemove:n.remove},null,8,["movements","onRemove"])]),_:1})}const nt=f(tt,[["render",ot]]);export{nt as default};
